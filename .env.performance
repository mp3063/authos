# ==============================================================================
# PERFORMANCE OPTIMIZATION CONFIGURATION
# ==============================================================================
# This file contains recommended production performance settings
# Copy relevant settings to your .env file for production deployments

# ------------------------------------------------------------------------------
# Cache Configuration
# ------------------------------------------------------------------------------

# Use Redis for better performance (requires Redis server)
CACHE_STORE=redis
CACHE_PREFIX=authos_cache_

# Cache TTL settings (in seconds)
CACHE_DEFAULT_TTL=300
CACHE_QUERY_TTL=600

# Cache specific data types
CACHE_TTL_USER_PERMISSIONS=600
CACHE_TTL_USER_PROFILE=300
CACHE_TTL_ORG_SETTINGS=1800
CACHE_TTL_ORG_USERS=600
CACHE_TTL_APP_CONFIG=3600
CACHE_TTL_APP_TOKENS=1800
CACHE_TTL_ANALYTICS=300
CACHE_TTL_AUTH_LOGS=300
CACHE_TTL_WEBHOOK_DELIVERIES=300
CACHE_TTL_SSO_CONFIG=3600
CACHE_TTL_LDAP_CONFIG=3600
CACHE_TTL_ROLES_PERMS=1800
CACHE_TTL_OAUTH_CLIENTS=3600

# Cache warming
CACHE_WARMING_ENABLED=true
CACHE_WARMING_SCHEDULE="*/15 * * * *"

# Cache invalidation
CACHE_INVALIDATION_STRATEGY=aggressive
CACHE_INVALIDATION_CASCADE=true
CACHE_INVALIDATION_ASYNC=false

# Browser caching
CACHE_BROWSER_ENABLED=true
CACHE_BROWSER_MAX_AGE=300

# Application caching
CACHE_APPLICATION_ENABLED=true
CACHE_QUERY_ENABLED=true

# ------------------------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------------------------

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_CACHE_CONNECTION=cache

# Redis connection pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=20

# ------------------------------------------------------------------------------
# Response Compression
# ------------------------------------------------------------------------------

COMPRESSION_ENABLED=true
COMPRESSION_MIN_LENGTH=1024
COMPRESSION_LEVEL=6

# ------------------------------------------------------------------------------
# Database Performance
# ------------------------------------------------------------------------------

# Query caching
DB_QUERY_CACHE_ENABLED=true
DB_QUERY_CACHE_TTL=600

# Connection pooling
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=60

# Slow query threshold (milliseconds)
DB_SLOW_QUERY_THRESHOLD=1000

# ------------------------------------------------------------------------------
# API Performance
# ------------------------------------------------------------------------------

# Pagination
API_DEFAULT_PER_PAGE=15
API_MAX_PER_PAGE=100

# Field filtering
API_FIELD_FILTERING_ENABLED=true

# Rate limiting
RATE_LIMIT_API=100
RATE_LIMIT_AUTH=10
RATE_LIMIT_CACHE_DRIVER=redis

# ------------------------------------------------------------------------------
# Performance Monitoring
# ------------------------------------------------------------------------------

PERFORMANCE_MONITORING_ENABLED=true

# Thresholds
PERF_RESPONSE_TIME_WARNING=500
PERF_RESPONSE_TIME_CRITICAL=1000
PERF_MEMORY_WARNING=64
PERF_MEMORY_CRITICAL=128
PERF_QUERY_COUNT_WARNING=20
PERF_QUERY_COUNT_CRITICAL=50

# Logging
PERF_LOG_SLOW_REQUESTS=true
PERF_LOG_HIGH_MEMORY=true
PERF_LOG_MANY_QUERIES=true

# ------------------------------------------------------------------------------
# Queue Configuration
# ------------------------------------------------------------------------------

# Use Redis for queues in production
QUEUE_CONNECTION=redis
QUEUE_REDIS_CONNECTION=default

# ------------------------------------------------------------------------------
# Session Configuration
# ------------------------------------------------------------------------------

# Use Redis for sessions in production
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false

# ------------------------------------------------------------------------------
# Asset Optimization
# ------------------------------------------------------------------------------

ASSET_CDN_ENABLED=false
ASSET_CDN_URL=
ASSET_VERSIONING_ENABLED=true

# ------------------------------------------------------------------------------
# Production Optimizations
# ------------------------------------------------------------------------------

# Set to false in production to improve performance
APP_DEBUG=false

# Reduce log level in production
LOG_LEVEL=warning

# Use production mail driver
MAIL_MAILER=smtp

# ------------------------------------------------------------------------------
# Laravel Octane (Optional - for maximum performance)
# ------------------------------------------------------------------------------
# Uncomment if using Laravel Octane

# OCTANE_SERVER=roadrunner
# OCTANE_HTTPS=false
# OCTANE_WORKERS=auto
# OCTANE_MAX_REQUESTS=500

# ------------------------------------------------------------------------------
# Performance Benchmarks
# ------------------------------------------------------------------------------
# These are target metrics, not configuration

# Target: 95th percentile response time < 100ms
# Target: 99th percentile response time < 250ms
# Target: Max response time < 1000ms
# Target: Throughput > 1000 requests/second
